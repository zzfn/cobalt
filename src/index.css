@import "tailwindcss";

@utility backdrop-blur-sm {
  backdrop-filter: blur(4px);
}

@utility backdrop-blur-md {
  backdrop-filter: blur(12px);
}

@utility backdrop-blur-lg {
  backdrop-filter: blur(16px);
}

@utility backdrop-blur-xl {
  backdrop-filter: blur(24px);
}

@theme {
  --color-border: hsl(var(--border));
  --color-border-strong: hsl(var(--border-strong));
  --color-border-black: hsl(var(--border-black));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  /* 侧边栏专用颜色 - Figma 极简风格 */
  --color-sidebar: hsl(var(--sidebar));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-item: hsl(var(--sidebar-item));
  --color-sidebar-item-hover: hsl(var(--sidebar-item-hover));
  --color-sidebar-item-active: hsl(var(--sidebar-item-active));
  --color-content-area: hsl(var(--content-area));
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);
}

@layer base {
  :root {
    /* Figma 极简风格 - 浅色模式 */
    --background: 0 0% 100%; /* #FFFFFF 纯白 */
    --foreground: 0 0% 8%; /* #141414 近黑色文字 */

    /* 卡片与弹出层 */
    --card: 0 0% 100%; /* #FFFFFF */
    --card-foreground: 0 0% 8%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 8%;

    /* 品牌色 - 克制的蓝色 */
    --primary: 220 80% 50%; /* #3399FF */
    --primary-foreground: 0 0% 100%;

    /* 次要背景 */
    --secondary: 0 0% 96%; /* #F5F5F5 */
    --secondary-foreground: 0 0% 8%;

    /* 弱化区域 */
    --muted: 0 0% 94%; /* #F0F0F0 */
    --muted-foreground: 0 0% 55%; /* #8C8C8C */

    /* 强调色 */
    --accent: 220 80% 50%;
    --accent-foreground: 0 0% 100%;

    /* 侧边栏 - Figma 风格：纯白 + 明显黑边框 */
    --sidebar: 0 0% 100%; /* 纯白背景 */
    --sidebar-border: 0 0% 88%; /* 明显黑灰边框 #E0E0E0 - Figma 风格 */
    --sidebar-item: 0 0% 100%; /* 透明 */
    --sidebar-item-hover: 0 0% 96%; /* 悬停极浅灰 #F5F5F5 */
    --sidebar-item-active: 0 0% 92%; /* 选中浅灰 #EBEBEB */
    --content-area: 0 0% 99%; /* 内容区极浅灰 #FCFCFC */

    /* 危险操作 */
    --destructive: 0 75% 55%;
    --destructive-foreground: 0 0% 100%;

    /* 边框 - Figma 风格：明显的黑色边框 */
    --border: 0 0% 85%; /* #D9D9D9 - 更明显的黑灰边框 */
    --border-strong: 0 0% 75%; /* #BFBFBF - 强调黑色边框 */
    --border-black: 0 0% 20%; /* #333333 - 近黑色边框 */
    --input: 0 0% 85%;
    --ring: 220 80% 50%;

    /* 圆角系统 - Figma 适度圆角 */
    --radius: 6px;

    /* 图表配色 */
    --chart-1: 220 70% 50%;
    --chart-2: 200 60% 45%;
    --chart-3: 180 65% 40%;
    --chart-4: 240 70% 55%;
    --chart-5: 260 75% 60%;
  }

  .dark {
    /* Figma 极简风格 - 深色模式 */
    --background: 0 0% 10%; /* #1A1A1A 深灰黑 */
    --foreground: 0 0% 98%; /* #FAFAFA */

    /* 卡片与弹出层 */
    --card: 0 0% 12%; /* #1F1F1F */
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 12%;
    --popover-foreground: 0 0% 98%;

    /* 品牌色 - 稍微提亮以适应深色背景 */
    --primary: 220 85% 60%;
    --primary-foreground: 0 0% 10%;

    /* 次要背景 */
    --secondary: 0 0% 18%; /* #2E2E2E */
    --secondary-foreground: 0 0% 98%;

    /* 弱化区域 */
    --muted: 0 0% 22%; /* #383838 */
    --muted-foreground: 0 0% 70%; /* #B3B3B3 */

    /* 强调色 */
    --accent: 220 85% 60%;
    --accent-foreground: 0 0% 10%;

    /* 侧边栏深色模式 - 细腻的白灰边框 */
    --sidebar: 0 0% 12%; /* 深灰背景 */
    --sidebar-border: 0 0% 22%; /* 细腻白灰边框 #383838 */
    --sidebar-item: 0 0% 12%;
    --sidebar-item-hover: 0 0% 18%; /* 悬停状态 */
    --sidebar-item-active: 0 0% 24%; /* 选中状态 */
    --content-area: 0 0% 8%; /* 内容区更深 */

    /* 危险操作 */
    --destructive: 0 70% 55%;
    --destructive-foreground: 0 0% 100%;

    /* 边框 - 深色模式下的明显白边框 */
    --border: 0 0% 25%; /* #404040 - 更明显的白灰边框 */
    --border-strong: 0 0% 35%; /* #595959 - 强调白色边框 */
    --border-black: 0 0% 85%; /* #D9D9D9 - 近白色边框 */
    --input: 0 0% 25%;
    --ring: 220 85% 60%;

    /* 图表配色 */
    --chart-1: 220 75% 55%;
    --chart-2: 200 70% 50%;
    --chart-3: 180 75% 45%;
    --chart-4: 240 75% 55%;
    --chart-5: 260 80% 60%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  html {
    @apply bg-background;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings:
      "rlig" 1,
      "calt" 1;
  }

  /* Placeholder 样式 */
  ::placeholder {
    @apply text-muted-foreground/40;
  }

  ::-webkit-input-placeholder {
    @apply text-muted-foreground/40;
  }

  ::-moz-placeholder {
    @apply text-muted-foreground/40;
  }

  :-ms-input-placeholder {
    @apply text-muted-foreground/40;
  }
}

/* Tabs 底部指示器样式 */
@layer components {
  [data-radix-tabs-trigger][data-state="active"]::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 2px;
    background-color: hsl(var(--primary));
    transition: all 0.2s ease;
  }
}

/* Markdown 预览样式 */
.markdown-preview {
  @apply text-foreground;
  line-height: 1.7;
}

.markdown-preview h1 {
  @apply text-2xl font-bold mt-6 mb-4 scroll-mt-20;
}

.markdown-preview h2 {
  @apply text-xl font-bold mt-5 mb-3 scroll-mt-20;
}

.markdown-preview h3 {
  @apply text-lg font-semibold mt-4 mb-2 scroll-mt-20;
}

.markdown-preview h4 {
  @apply text-base font-semibold mt-3 mb-2 scroll-mt-20;
}

.markdown-preview p {
  @apply mb-4;
}

.markdown-preview ul,
.markdown-preview ol {
  @apply ml-6 mb-4 space-y-2;
}

.markdown-preview ul {
  @apply list-disc;
}

.markdown-preview ol {
  @apply list-decimal;
}

.markdown-preview li {
  @apply pl-2;
}

.markdown-preview code {
  @apply bg-muted px-1.5 py-0.5 rounded-sm text-sm font-mono border border-border/50;
}

.markdown-preview pre {
  @apply bg-muted p-4 rounded-sm mb-4 overflow-x-auto border border-border/50;
}

.markdown-preview pre code {
  @apply bg-transparent p-0 border-0;
}

.markdown-preview blockquote {
  @apply border-l-4 border-primary/30 pl-4 italic text-muted-foreground mb-4 bg-muted/30 py-2 rounded-r-sm;
}

.markdown-preview a {
  @apply text-primary hover:underline underline-offset-4 transition-colors;
}

.markdown-preview table {
  @apply w-full mb-4 border-collapse rounded-sm overflow-hidden;
}

.markdown-preview th,
.markdown-preview td {
  @apply border border-border px-3 py-2 text-left;
}

.markdown-preview th {
  @apply bg-muted font-semibold;
}

.markdown-preview hr {
  @apply my-6 border-border;
}

.markdown-preview img {
  @apply max-w-full h-auto rounded-sm my-4 border border-border/50;
}

/* 平滑动画 */
@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-in {
  animation: fade-in 0.3s ease-out;
}

/* 尊重用户的动画偏好 */
@media (prefers-reduced-motion: reduce) {
  .animate-in,
  .transition-all,
  .transition-colors {
    animation: none !important;
    transition: none !important;
  }
}
