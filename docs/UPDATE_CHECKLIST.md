# è‡ªåŠ¨æ›´æ–°é…ç½®æ£€æŸ¥æ¸…å•

åœ¨å‘å¸ƒç¬¬ä¸€ä¸ªæ”¯æŒè‡ªåŠ¨æ›´æ–°çš„ç‰ˆæœ¬ä¹‹å‰ï¼Œè¯·ç¡®ä¿å®Œæˆä»¥ä¸‹æ‰€æœ‰æ­¥éª¤ï¼š

## âœ… æœ¬åœ°é…ç½®

### 1. ç”Ÿæˆç­¾åå¯†é’¥
- [ ] è¿è¡Œ `make generate-keys` æˆ– `pnpm tauri signer generate -w ~/.tauri/cobalt.key`
- [ ] ç¡®è®¤ç§é’¥æ–‡ä»¶å­˜åœ¨: `~/.tauri/cobalt.key`
- [ ] ç¡®è®¤å…¬é’¥æ–‡ä»¶å­˜åœ¨: `~/.tauri/cobalt.key.pub`
- [ ] **é‡è¦**: å¤‡ä»½ç§é’¥åˆ°å®‰å…¨ä½ç½®ï¼ˆå¦‚å¯†ç ç®¡ç†å™¨ï¼‰

### 2. é…ç½® tauri.conf.json
- [ ] æ‰“å¼€ `src-tauri/tauri.conf.json`
- [ ] ç¡®è®¤ `plugins.updater.active` ä¸º `true`
- [ ] å°†å…¬é’¥å†…å®¹å¤åˆ¶åˆ° `plugins.updater.pubkey`
- [ ] æ›´æ–° `plugins.updater.endpoints` ä¸­çš„ GitHub ç”¨æˆ·åå’Œä»“åº“å

ç¤ºä¾‹é…ç½®:
```json
{
  "plugins": {
    "updater": {
      "active": true,
      "endpoints": [
        "https://github.com/YOUR_USERNAME/cobalt/releases/latest/download/latest.json"
      ],
      "dialog": true,
      "pubkey": "YOUR_PUBLIC_KEY_HERE"
    }
  }
}
```

### 3. å®‰è£…ä¾èµ–
- [ ] è¿è¡Œ `pnpm install`
- [ ] ç¡®è®¤å®‰è£…äº† `@tauri-apps/plugin-updater`
- [ ] ç¡®è®¤å®‰è£…äº† `@tauri-apps/plugin-process`

## âœ… GitHub é…ç½®

### 4. é…ç½® GitHub Secrets
- [ ] è®¿é—® GitHub ä»“åº“è®¾ç½®: `Settings` â†’ `Secrets and variables` â†’ `Actions`
- [ ] ç‚¹å‡» `New repository secret`
- [ ] æ·»åŠ  Secret:
  - åç§°: `TAURI_PRIVATE_KEY`
  - å€¼: `~/.tauri/cobalt.key` çš„å®Œæ•´å†…å®¹
- [ ] ç¡®è®¤ Secret å·²ä¿å­˜

### 5. éªŒè¯ GitHub Actions
- [ ] ç¡®è®¤ `.github/workflows/release-macos.yml` å­˜åœ¨
- [ ] ç¡®è®¤å·¥ä½œæµä¸­åŒ…å« `TAURI_PRIVATE_KEY: ${{ secrets.TAURI_PRIVATE_KEY }}`
- [ ] ç¡®è®¤å·¥ä½œæµè§¦å‘æ¡ä»¶ä¸º `tags: - 'v*'`

## âœ… ä»£ç éªŒè¯

### 6. æ£€æŸ¥å‰ç«¯ä»£ç 
- [ ] ç¡®è®¤ `src/components/UpdateChecker.tsx` å­˜åœ¨
- [ ] ç¡®è®¤ `src/components/layout/Layout.tsx` ä¸­å¯¼å…¥äº† `UpdateChecker`
- [ ] ç¡®è®¤ `<UpdateChecker />` ç»„ä»¶å·²æ·»åŠ åˆ°å¸ƒå±€ä¸­

### 7. æ£€æŸ¥åç«¯ä»£ç 
- [ ] ç¡®è®¤ `src-tauri/Cargo.toml` ä¸­åŒ…å« `tauri-plugin-updater = "2"`
- [ ] ç¡®è®¤ `src-tauri/src/lib.rs` ä¸­åŒ…å« `.plugin(tauri_plugin_updater::Builder::new().build())`

## âœ… æµ‹è¯•

### 8. æœ¬åœ°æ„å»ºæµ‹è¯•
- [ ] è¿è¡Œ `pnpm tauri build`
- [ ] ç¡®è®¤æ„å»ºæˆåŠŸ
- [ ] ç¡®è®¤ç”Ÿæˆäº†å®‰è£…åŒ…

### 9. ç­¾åæµ‹è¯•
- [ ] è¿è¡Œ `make sign-update VERSION=0.2.2`ï¼ˆä½¿ç”¨å½“å‰ç‰ˆæœ¬å·ï¼‰
- [ ] ç¡®è®¤ç”Ÿæˆäº† `.sig` æ–‡ä»¶
- [ ] ç¡®è®¤æ²¡æœ‰ç­¾åé”™è¯¯

## âœ… å‘å¸ƒå‡†å¤‡

### 10. ç‰ˆæœ¬å·æ£€æŸ¥
- [ ] ç¡®è®¤ `package.json` ä¸­çš„ç‰ˆæœ¬å·
- [ ] ç¡®è®¤ `src-tauri/Cargo.toml` ä¸­çš„ç‰ˆæœ¬å·
- [ ] ç¡®è®¤ `src-tauri/tauri.conf.json` ä¸­çš„ç‰ˆæœ¬å·
- [ ] ç¡®è®¤ä¸‰ä¸ªæ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·ä¸€è‡´

### 11. æ–‡æ¡£æ£€æŸ¥
- [ ] é˜…è¯» `docs/AUTO_UPDATE.md`
- [ ] é˜…è¯» `docs/QUICK_START_UPDATE.md`
- [ ] ç†è§£æ›´æ–°æµç¨‹

## âœ… é¦–æ¬¡å‘å¸ƒ

### 12. åˆ›å»ºç¬¬ä¸€ä¸ªæ”¯æŒæ›´æ–°çš„ç‰ˆæœ¬
- [ ] è¿è¡Œ `make tag-release VERSION=0.3.0`ï¼ˆæˆ–å…¶ä»–æ–°ç‰ˆæœ¬å·ï¼‰
- [ ] ç¡®è®¤ Git tag å·²åˆ›å»º
- [ ] ç¡®è®¤ tag å·²æ¨é€åˆ° GitHub
- [ ] ç­‰å¾… GitHub Actions å®Œæˆæ„å»º

### 13. éªŒè¯ GitHub Release
- [ ] è®¿é—® GitHub Releases é¡µé¢
- [ ] ç¡®è®¤æ–°ç‰ˆæœ¬å·²åˆ›å»º
- [ ] ç¡®è®¤åŒ…å«ä»¥ä¸‹æ–‡ä»¶:
  - [ ] å®‰è£…åŒ…ï¼ˆ.dmg æˆ– .app.tar.gzï¼‰
  - [ ] ç­¾åæ–‡ä»¶ï¼ˆ.sigï¼‰
  - [ ] latest.json
- [ ] ä¸‹è½½å¹¶æ£€æŸ¥ `latest.json` æ ¼å¼

### 14. æµ‹è¯•æ›´æ–°æµç¨‹
- [ ] å®‰è£…æ—§ç‰ˆæœ¬åº”ç”¨ï¼ˆå¦‚æœæœ‰ï¼‰
- [ ] å¯åŠ¨åº”ç”¨
- [ ] ç¡®è®¤æ”¶åˆ°æ›´æ–°é€šçŸ¥
- [ ] ç‚¹å‡»"ç«‹å³æ›´æ–°"
- [ ] ç¡®è®¤ä¸‹è½½è¿›åº¦æ˜¾ç¤º
- [ ] ç¡®è®¤æ›´æ–°æˆåŠŸå®‰è£…
- [ ] ç¡®è®¤åº”ç”¨è‡ªåŠ¨é‡å¯
- [ ] ç¡®è®¤æ–°ç‰ˆæœ¬æ­£å¸¸è¿è¡Œ

## âœ… åç»­ç»´æŠ¤

### 15. æ¯æ¬¡å‘å¸ƒæ–°ç‰ˆæœ¬
- [ ] æ›´æ–°ç‰ˆæœ¬å·: `make tag-release VERSION=x.x.x`
- [ ] ç­‰å¾… GitHub Actions å®Œæˆ
- [ ] éªŒè¯ Release æ–‡ä»¶å®Œæ•´
- [ ] æµ‹è¯•æ›´æ–°æµç¨‹

### 16. ç›‘æ§å’Œç»´æŠ¤
- [ ] å®šæœŸæ£€æŸ¥ GitHub Actions è¿è¡ŒçŠ¶æ€
- [ ] å…³æ³¨ç”¨æˆ·åé¦ˆçš„æ›´æ–°é—®é¢˜
- [ ] ä¿æŒç§é’¥å®‰å…¨
- [ ] å®šæœŸå¤‡ä»½ç§é’¥

## ğŸš¨ é‡è¦æé†’

### å®‰å…¨æ³¨æ„äº‹é¡¹
- âš ï¸ **ç»å¯¹ä¸è¦**å°†ç§é’¥æäº¤åˆ° Git ä»“åº“
- âš ï¸ **ç»å¯¹ä¸è¦**åœ¨å…¬å¼€åœºåˆåˆ†äº«ç§é’¥
- âš ï¸ **åŠ¡å¿…**å¤‡ä»½ç§é’¥åˆ°å®‰å…¨ä½ç½®
- âš ï¸ **åŠ¡å¿…**å¦¥å–„ä¿ç®¡ GitHub Secrets

### ç‰ˆæœ¬å·è§„åˆ™
- âœ… æ¯æ¬¡å‘å¸ƒå¿…é¡»é€’å¢ç‰ˆæœ¬å·
- âœ… éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ (Semantic Versioning)
- âœ… æ ¼å¼: `ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·` (å¦‚ 0.3.0)

### å‘å¸ƒæ£€æŸ¥
- âœ… ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
- âœ… ç¡®ä¿æ„å»ºæˆåŠŸ
- âœ… ç¡®ä¿ç­¾åæ–‡ä»¶å­˜åœ¨
- âœ… ç¡®ä¿ latest.json æ ¼å¼æ­£ç¡®

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹:
- [å®Œæ•´é…ç½®æŒ‡å—](AUTO_UPDATE.md)
- [å¿«é€Ÿå¼€å§‹æŒ‡å—](QUICK_START_UPDATE.md)
- [å®ç°æ€»ç»“](IMPLEMENTATION_SUMMARY.md)
- [Tauri å®˜æ–¹æ–‡æ¡£](https://tauri.app/v1/guides/distribution/updater)

## âœ… é…ç½®å®Œæˆ

å½“æ‰€æœ‰å¤é€‰æ¡†éƒ½è¢«å‹¾é€‰åï¼Œä½ çš„åº”ç”¨å°±å·²ç»å®Œå…¨æ”¯æŒè‡ªåŠ¨æ›´æ–°åŠŸèƒ½äº†ï¼

ç¥å‘å¸ƒé¡ºåˆ©ï¼ğŸ‰
